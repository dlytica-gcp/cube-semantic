import{R as N,C as w}from"./index-2a334e56.js";import{s as b,j as i}from"./index-31f541c4.js";import{u as C,r as a}from"./react-venders-3a9fd7ec.js";import{u as $}from"./index-d72c3122.js";import{d as L,u as R,D as v}from"./useOnboarding-2998ad07.js";import{i as G}from"./index-c0d2be16.js";import{B as U}from"./index-9534a782.js";import{u as _}from"./useLocation-795e9ebc.js";import{C as B}from"./CurrentUserStore-886fe293.js";import{L as F,O as I,M as A,b as P}from"./paths-1d44e380.js";import"./button-255d95e9.js";import"./tslib.es6-5f87f175.js";import"./index-166ce56c.js";import"./index-f28b3217.js";import"./dayjs.min-e1e47a26.js";import"./formatTime-900939d2.js";import"./useTranslation-f1e31b7f.js";import"./alertTypes-bd9943c7.js";import"./Sider-2eea88ce.js";import"./index-74275833.js";import"./index-17f232aa.js";import"./index-b094a404.js";import"./index-d4c68e4d.js";import"./index-b0c28476.js";import"./index-4e5c896b.js";import"./genName-6cc4e155.js";import"./index-0f090c4c.js";import"./useCheckResponse-471c00b7.js";import"./index-d5b304fb.js";import"./index-81782579.js";import"./SettingOutlined-58db4ea1.js";import"./dataSources-efcbf825.js";import"./index-801816c4.js";import"./index-217cb9e2.js";import"./AuthTokensStore-9401662d.js";import"./validations-55614028.js";import"./index-03282bf3.js";import"./index-e26e008e.js";import"./index-19cf5167.js";import"./capitalize-b2c18dd5.js";import"./index-74b97788.js";import"./trash-colored-debd1411.js";import"./team-a9599a92.js";import"./urql.es-e4ed66a8.js";const T=[{label:b.t("common:words.personal_info"),href:"/settings/info"},{label:b.t("common:words.logout"),href:F}],k="_container_15yy6_1",W={container:k},q=({loading:m=!1,onSkip:o=()=>{},onFinish:r=()=>{},onChangeStep:t=()=>{},onTestConnection:p=()=>{},onDataSourceSelect:c=()=>{},onDataSourceSetupSubmit:u=()=>{},onDataModelGenerationSubmit:f=()=>{}})=>{const l=$(),{currentUser:n}=B(),s=i.jsx(G,{username:n.displayName,userAvatar:n.avatarUrl,userMenu:T,teams:n.teams,type:l.lg?"inline":"dropdown"});return i.jsx(U,{header:s,disableMenu:!0,children:i.jsx(N,{className:W.container,children:i.jsx(w,{xs:24,children:i.jsx(v,{bordered:!0,onSkip:o,onChangeStep:t,loading:m,onFinish:r,onDataSourceSelect:c,onTestConnection:p,onDataSourceSetupSubmit:u,onDataModelGenerationSubmit:f})})})})},Bt=()=>{const{step:m}=C(),[,o]=_(),r=I,t=a.useMemo(()=>parseInt(m||"0",10)-1,[m]),{formState:{step0:p,step1:c},isOnboarding:u,setIsOnboarding:f,setStep:l,setFormStateData:n,clean:s}=L(),{loading:x,onDataSourceSetupSubmit:d,onDataModelGenerationSubmit:D}=R({}),O=()=>{s(),o(A)},g=e=>{o(`${r}/${e+1}`)},S=()=>{o(`${r}/${t+2}`)},h=e=>{n(0,e),S()},y=()=>{s(),o(P)},E=async e=>{await d(e,!1,S)},j=async e=>{await D(e)&&S()},M=async e=>{await d(e,!0,S)};return a.useEffect(()=>{t>=0&&l(t)},[l,t]),a.useEffect(()=>{(t<0||t>4||isNaN(t))&&o(`${r}/1`)},[r,o,t]),a.useEffect(()=>{t>0&&!p?o(`${r}/1`):t>1&&!c&&o(`${r}/2`)},[r,o,t,p,c]),a.useEffect(()=>{u||f(!0)},[u,f]),a.useEffect(()=>()=>s(),[s]),i.jsx(q,{loading:x,onSkip:y,onFinish:O,onChangeStep:g,onDataSourceSelect:h,onTestConnection:M,onDataSourceSetupSubmit:E,onDataModelGenerationSubmit:j})};export{Bt as default};
