import{B as l,T as v,R as L,C as N}from"./index-2a334e56.js";import{A as b}from"./index-d4c68e4d.js";import{j as r,c as m}from"./index-31f541c4.js";import{r as k}from"./react-venders-3a9fd7ec.js";import{B as w}from"./index-9534a782.js";import{u as I,F as S,I as x}from"./index-f28b3217.js";import{u as g}from"./useLocation-795e9ebc.js";import{v as h}from"./validations-55614028.js";import{S as T,O as W}from"./paths-1d44e380.js";import{u as A}from"./useTranslation-f1e31b7f.js";import{u as C}from"./useAuth-c4a8cfeb.js";import{A as B}from"./index-01236b0c.js";import"./button-255d95e9.js";import"./index-217cb9e2.js";import"./Sider-2eea88ce.js";import"./index-d72c3122.js";import"./tslib.es6-5f87f175.js";import"./dayjs.min-e1e47a26.js";import"./formatTime-900939d2.js";import"./AuthTokensStore-9401662d.js";import"./index-801816c4.js";const q="_wrapper_1j6l1_1",F="_header_1j6l1_5",R="_magicLinkWrapper_1j6l1_9",D="_magicLink_1j6l1_9",E="_or_1j6l1_18",O="_form_1j6l1_23",P="_formItem_1j6l1_28",G="_desc_1j6l1_31",M="_text_1j6l1_34",U="_link_1j6l1_37",z="_privacyLink_1j6l1_42",$="_input_1j6l1_47",H="_error_1j6l1_55",J="_checkboxWrapper_1j6l1_61",K="_submit_1j6l1_64",e={wrapper:q,header:F,magicLinkWrapper:R,magicLink:D,or:E,form:O,formItem:P,desc:G,text:M,link:U,privacyLink:z,input:$,error:H,checkboxWrapper:J,submit:K},{Title:Q,Text:f}=v,V=({isMagicLink:n,loading:p,onSubmit:_})=>{const[,c]=g(),{t:s}=A(["sign","common"]),{control:a,handleSubmit:u,formState:{errors:t}}=I();return r.jsxs("div",{className:e.wrapper,children:[r.jsxs("div",{className:e.header,children:[r.jsx(Q,{level:2,children:s("sign_up.title")}),r.jsxs(f,{className:e.desc,children:[s("sign_up.text"),"!"]})]}),r.jsxs(S,{className:e.form,children:[r.jsx(x,{className:m(e.formItem,e.input,{[e.error]:t==null?void 0:t.email}),variant:"borderless",placeholder:s("common:form.placeholders.email"),control:a,rules:{required:!0,validate:i=>h.email(i)||s("common:form.errors.email")},name:"email"}),!n&&r.jsx(x,{className:m(e.formItem,e.input,{[e.error]:t==null?void 0:t.password}),variant:"borderless",placeholder:s("common:form.placeholders.password"),control:a,rules:{required:!0,validate:i=>h.password(i)||s("common:form.errors.password")},name:"password",fieldType:"password"}),r.jsx("div",{className:e.checkboxWrapper,children:r.jsx(x,{className:e.checkbox,control:a,rules:{required:!0},name:"privacy",fieldType:"checkbox",children:r.jsxs("span",{children:[s("sign_up.privacy_text_1")," ",r.jsx(l,{className:m(e.link,e.privacyLink),type:"link",onClick:i=>{i.preventDefault(),i.stopPropagation()},children:s("sign_up.privacy_link_1")})," ",s("sign_up.privacy_text_2")," ",r.jsx(l,{className:m(e.link,e.privacyLink),type:"link",onClick:i=>{i.preventDefault(),i.stopPropagation()},children:s("sign_up.privacy_link_2")})]})})}),r.jsx(l,{className:e.submit,type:"primary",htmlType:"submit",size:"large",loading:p,onClick:u(_),children:s("sign_up.sign_up")}),r.jsxs(f,{className:e.text,children:[s("sign_up.bottom_text")," ",r.jsx(l,{className:e.link,type:"link",onClick:()=>c(T),children:s("sign_up.sign_in_link")})]})]})]})},X="_container_b0pkk_1",Y={container:X},gr=()=>{const[n,p]=k.useState(),[_,c]=k.useState(!1),{register:s,sendMagicLink:a}=C(),[u,t]=g(),{magicLink:i}=u.query,j=i!==void 0,y=async d=>{delete d.privacy,c(!0);let o;if(j?o=await a(d):o=await s(d),c(!1),o!=null&&o.error){p(o.message||o.error);return}t(W)};return r.jsx(w,{header:r.jsx(B,{currentPage:"signup"}),children:r.jsx(L,{className:Y.container,justify:"center",align:"middle",children:r.jsxs(N,{xs:24,style:{maxWidth:356},children:[r.jsx(V,{loading:_,onSubmit:y,isMagicLink:j}),n&&r.jsx(b,{message:r.jsx("span",{children:n}),type:"error"})]})})})};export{gr as default};
