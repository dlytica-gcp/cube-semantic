import{j as Re,C as et}from"./index-31f541c4.js";import{f as M,m as F,s as Fe,c as se,a as ue,p as tt,t as Le,b as ve,d as ce,e as de,g as _e,h as rt,i as Ee,o as nt,j as ot,k as be,l as at,n as we,q as He,r as it,u as We,v as st,w as lt,x as ut,y as le,z as ct,A as dt,B as pt,C as ft}from"./urql.es-e4ed66a8.js";import{g as Be,c as mt,r as yt,j as ht}from"./react-venders-3a9fd7ec.js";import{d as Qe}from"./dayjs.min-e1e47a26.js";import{f as gt}from"./useAuth-c4a8cfeb.js";import{A as _t}from"./AuthTokensStore-9401662d.js";import{S as bt}from"./paths-1d44e380.js";import{u as xt}from"./useTranslation-f1e31b7f.js";import"./index-801816c4.js";var ze={exports:{}};(function(e){function n(l){return l&&l.__esModule?l:{default:l}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(ze);var B=ze.exports,xe=(e,n)=>{if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(_=>xe(_));if(e&&typeof e=="object"&&(n||"__typename"in e)){var l={};for(var y in e)y==="__typename"?Object.defineProperty(l,"__typename",{enumerable:!1,value:e.__typename}):l[y]=xe(e[y]);return l}else return e};function Te(e){var n=l=>e(l);return n.toPromise=()=>Le(ve(1)(M(l=>!l.stale&&!l.hasNext)(n))),n.then=(l,y)=>n.toPromise().then(l,y),n.subscribe=l=>Fe(l)(n),n}function W(e,n,l){return{...n,kind:e,context:n.context?{...n.context,...l}:l||n.context}}var vt=()=>{},wt=({forwardSubscription:e,enableAllOperations:n,isSubscriptionOperation:l})=>({client:y,forward:_})=>{var d=l||(p=>p.kind==="subscription"||!!n&&(p.kind==="query"||p.kind==="mutation"));return p=>{var S=we(u=>{var{key:f}=u,b=M(c=>c.kind==="teardown"&&c.key===f)(p);return de(b)((c=>{var o=e(He(c),c);return it(i=>{var v=!1,E,a;function t(s){i.next(a=a?ct(a,s):dt(c,s))}return Promise.resolve().then(()=>{v||(E=o.subscribe({next:t,error(s){Array.isArray(s)?t({errors:s}):i.next(We(c,s)),i.complete()},complete(){v||(v=!0,c.kind==="subscription"&&y.reexecuteOperation(W("teardown",c,c.context)),a&&a.hasNext&&t({hasNext:!1}),i.complete())}}))}),()=>{v=!0,E&&E.unsubscribe()}})})(u))})(M(u=>u.kind!=="teardown"&&d(u))(p)),w=_(M(u=>u.kind==="teardown"||!d(u))(p));return F([S,w])}},kt=({forward:e,dispatchDebug:n})=>l=>{var y=we(d=>{var p=He(d),S=st(d,p),w=lt(d,p),u=de(M(f=>f.kind==="teardown"&&f.key===d.key)(l))(ut(d,S,w));return u})(M(d=>d.kind!=="teardown"&&(d.kind!=="subscription"||!!d.context.fetchSubscriptions))(l)),_=e(M(d=>d.kind==="teardown"||d.kind==="subscription"&&!d.context.fetchSubscriptions)(l));return F([y,_])},$t=e=>({client:n,forward:l,dispatchDebug:y})=>e.reduceRight((_,d)=>d({client:n,forward(p){return ue(_(ue(p)))},dispatchDebug(p){}}),l),St=({dispatchDebug:e})=>n=>M(l=>!1)(n),Pt=function e(n){var l=0,y=new Map,_=new Map,d=new Set,p=[],S={url:n.url,fetchSubscriptions:n.fetchSubscriptions,fetchOptions:n.fetchOptions,fetch:n.fetch,preferGetMethod:!!n.preferGetMethod,requestPolicy:n.requestPolicy||"cache-first"},w=ce();function u(t){(t.kind==="mutation"||t.kind==="teardown"||!d.has(t.key))&&(t.kind==="teardown"?d.delete(t.key):t.kind!=="mutation"&&d.add(t.key),w.next(t))}var f=!1;function b(t){if(t&&u(t),!f){for(f=!0;f&&(t=p.shift());)u(t);f=!1}}var c=t=>{var s=de(M(r=>r.kind==="teardown"&&r.key===t.key)(w.source))(M(r=>r.operation.kind===t.kind&&r.operation.key===t.key&&(!r.operation.context._instance||r.operation.context._instance===t.context._instance))(a));return n.maskTypename&&(s=_e(r=>({...r,data:xe(r.data,!0)}))(s)),t.kind!=="query"?s=rt(r=>!!r.hasNext,!0)(s):s=Ee(r=>{var R=le(r);return r.stale||r.hasNext?R:F([R,_e(()=>(r.stale=!0,r))(ve(1)(M(U=>U.key===t.key)(w.source)))])})(s),t.kind!=="mutation"?s=nt(()=>{d.delete(t.key),y.delete(t.key),_.delete(t.key),f=!1;for(var r=p.length-1;r>=0;r--)p[r].key===t.key&&p.splice(r,1);u(W("teardown",t,t.context))})(ot(r=>{if(r.stale){for(var R of p)if(R.key===r.operation.key){d.delete(R.key);break}}else r.hasNext||d.delete(t.key);y.set(t.key,r)})(s)):s=be(()=>{u(t)})(s),ue(s)},o=this instanceof e?this:Object.create(e.prototype),i=Object.assign(o,{suspense:!!n.suspense,operations$:w.source,reexecuteOperation(t){t.kind==="teardown"?b(t):(t.kind==="mutation"||_.has(t.key))&&(p.push(t),Promise.resolve().then(b))},createRequestOperation(t,s,r){return r||(r={}),W(t,s,{_instance:t==="mutation"?l=l+1|0:void 0,...S,...r,requestPolicy:r.requestPolicy||S.requestPolicy,suspense:r.suspense||r.suspense!==!1&&i.suspense})},executeRequestOperation(t){return t.kind==="mutation"?Te(c(t)):Te(at(()=>{var s=_.get(t.key);s||_.set(t.key,s=c(t)),s=be(()=>{b(t)})(s);var r=y.get(t.key);return t.kind==="query"&&r&&(r.stale||r.hasNext)?Ee(le)(F([s,M(R=>R===y.get(t.key))(le(r))])):s}))},executeQuery(t,s){var r=i.createRequestOperation("query",t,s);return i.executeRequestOperation(r)},executeSubscription(t,s){var r=i.createRequestOperation("subscription",t,s);return i.executeRequestOperation(r)},executeMutation(t,s){var r=i.createRequestOperation("mutation",t,s);return i.executeRequestOperation(r)},readQuery(t,s,r){var R=null;return Fe(U=>{R=U})(i.query(t,s,r)).unsubscribe(),R},query:(t,s,r)=>i.executeQuery(se(t,s),r),subscription:(t,s,r)=>i.executeSubscription(se(t,s),r),mutation:(t,s,r)=>i.executeMutation(se(t,s),r)}),v=vt,E=$t(n.exchanges),a=ue(E({client:i,dispatchDebug:v,forward:St({dispatchDebug:v})})(w.source));return tt(a),i},Rt=Pt,pe={},z={},Ae;function Et(){if(Ae)return z;Ae=1,Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var e={items_per_page:"/ стр.",jump_to:"Перейти",jump_to_confirm:"подтвердить",page:"Страница",prev_page:"Назад",next_page:"Вперед",prev_5:"Предыдущие 5",next_5:"Следующие 5",prev_3:"Предыдущие 3",next_3:"Следующие 3",page_size:"размер страницы"};return z.default=e,z}var G={},K={},V={},Me;function Tt(){if(Me)return V;Me=1,Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var e={locale:"ru_RU",today:"Сегодня",now:"Сейчас",backToToday:"Текущая дата",ok:"ОК",clear:"Очистить",month:"Месяц",year:"Год",timeSelect:"Выбрать время",dateSelect:"Выбрать дату",monthSelect:"Выбрать месяц",yearSelect:"Выбрать год",decadeSelect:"Выбрать десятилетие",yearFormat:"YYYY",dateFormat:"D-M-YYYY",dayFormat:"D",dateTimeFormat:"D-M-YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Предыдущий месяц (PageUp)",nextMonth:"Следующий месяц (PageDown)",previousYear:"Предыдущий год (Control + left)",nextYear:"Следующий год (Control + right)",previousDecade:"Предыдущее десятилетие",nextDecade:"Следущее десятилетие",previousCentury:"Предыдущий век",nextCentury:"Следующий век"};return V.default=e,V}var J={},Oe;function Ge(){if(Oe)return J;Oe=1,Object.defineProperty(J,"__esModule",{value:!0}),J.default=void 0;const e={placeholder:"Выберите время",rangePlaceholder:["Время начала","Время окончания"]};return J.default=e,J}var qe;function Ke(){if(qe)return K;qe=1;var e=B;Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var n=e(Tt()),l=e(Ge());const y={lang:Object.assign({placeholder:"Выберите дату",yearPlaceholder:"Выберите год",quarterPlaceholder:"Выберите квартал",monthPlaceholder:"Выберите месяц",weekPlaceholder:"Выберите неделю",rangePlaceholder:["Начальная дата","Конечная дата"],rangeYearPlaceholder:["Начальный год","Год окончания"],rangeMonthPlaceholder:["Начальный месяц","Конечный месяц"],rangeWeekPlaceholder:["Начальная неделя","Конечная неделя"]},n.default),timePickerLocale:Object.assign({},l.default)};return K.default=y,K}var Ue;function At(){if(Ue)return G;Ue=1;var e=B;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var n=e(Ke());return G.default=n.default,G}var fe=B;Object.defineProperty(pe,"__esModule",{value:!0});pe.default=void 0;var Mt=fe(Et()),Ot=fe(At()),qt=fe(Ke()),Ut=fe(Ge());const N="${label} не является типом ${type}",Nt={locale:"ru",Pagination:Mt.default,DatePicker:qt.default,TimePicker:Ut.default,Calendar:Ot.default,global:{placeholder:"Пожалуйста выберите"},Table:{filterTitle:"Фильтр",filterConfirm:"OK",filterReset:"Сбросить",filterEmptyText:"Без фильтров",filterCheckall:"Выбрать все элементы",filterSearchPlaceholder:"Поиск в фильтрах",emptyText:"Нет данных",selectAll:"Выбрать всё",selectInvert:"Инвертировать выбор",selectNone:"Очистить все данные",selectionAll:"Выбрать все данные",sortTitle:"Сортировка",expand:"Развернуть строку",collapse:"Свернуть строку",triggerDesc:"Нажмите для сортировки по убыванию",triggerAsc:"Нажмите для сортировки по возрастанию",cancelSort:"Нажмите, чтобы отменить сортировку"},Tour:{Next:"Далее",Previous:"Назад",Finish:"Завершить"},Modal:{okText:"OK",cancelText:"Отмена",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Отмена"},Transfer:{titles:["",""],searchPlaceholder:"Поиск",itemUnit:"элем.",itemsUnit:"элем.",remove:"Удалить",selectAll:"Выбрать все данные",selectCurrent:"Выбрать текущую страницу",selectInvert:"Инвертировать выбор",removeAll:"Удалить все данные",removeCurrent:"Удалить текущую страницу"},Upload:{uploading:"Загрузка...",removeFile:"Удалить файл",uploadError:"При загрузке произошла ошибка",previewFile:"Предпросмотр файла",downloadFile:"Загрузить файл"},Empty:{description:"Нет данных"},Icon:{icon:"иконка"},Text:{edit:"Редактировать",copy:"Копировать",copied:"Скопировано",expand:"Раскрыть"},PageHeader:{back:"Назад"},Form:{optional:"(необязательно)",defaultValidateMessages:{default:"Ошибка проверки поля ${label}",required:"Пожалуйста, введите ${label}",enum:"${label} должен быть одним из [${enum}]",whitespace:"${label} не может быть пустым",date:{format:"${label} не правильный формат даты",parse:"${label} не может быть преобразовано в дату",invalid:"${label} не является корректной датой"},types:{string:N,method:N,array:N,object:N,number:N,date:N,boolean:N,integer:N,float:N,regexp:N,email:N,url:N,hex:N},string:{len:"${label} должна быть ${len} символов",min:"${label} должна быть больше или равна ${min} символов",max:"${label} должна быть меньше или равна ${max} символов",range:"Длина ${label} должна быть между ${min}-${max} символами"},number:{len:"${label} должна быть равна ${len}",min:"${label} должна быть больше или равна ${min}",max:"${label} должна быть меньше или равна ${max}",range:"${label} должна быть между ${min}-${max}"},array:{len:"Количество элементов ${label} должно быть равно ${len}",min:"Количество элементов ${label} должно быть больше или равно ${min}",max:"Количество элементов ${label} должно быть меньше или равно ${max}",range:"Количество элементов ${label} должно быть между ${min} и ${max}"},pattern:{mismatch:"${label} не соответствует шаблону ${pattern}"}}},Image:{preview:"Предпросмотр"},QRCode:{expired:"QR-код устарел",refresh:"Обновить"}};pe.default=Nt;var Dt=pe;const It=Be(Dt);var me={},X={},Ne;function jt(){if(Ne)return X;Ne=1,Object.defineProperty(X,"__esModule",{value:!0}),X.default=void 0;var e={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};return X.default=e,X}var Z={},ee={},te={},De;function Yt(){if(De)return te;De=1,Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var e={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};return te.default=e,te}var re={},Ie;function Ve(){if(Ie)return re;Ie=1,Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;const e={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};return re.default=e,re}var je;function Je(){if(je)return ee;je=1;var e=B;Object.defineProperty(ee,"__esModule",{value:!0}),ee.default=void 0;var n=e(Yt()),l=e(Ve());const y={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},n.default),timePickerLocale:Object.assign({},l.default)};return ee.default=y,ee}var Ye;function Ct(){if(Ye)return Z;Ye=1;var e=B;Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var n=e(Je());return Z.default=n.default,Z}var ye=B;Object.defineProperty(me,"__esModule",{value:!0});me.default=void 0;var Ft=ye(jt()),Lt=ye(Ct()),Ht=ye(Je()),Wt=ye(Ve());const D="${label} is not a valid ${type}",Bt={locale:"en",Pagination:Ft.default,DatePicker:Ht.default,TimePicker:Wt.default,Calendar:Lt.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:D,method:D,array:D,object:D,number:D,date:D,boolean:D,integer:D,float:D,regexp:D,email:D,url:D,hex:D},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};me.default=Bt;var Qt=me;const zt=Be(Qt);var Gt={exports:{}};(function(e,n){(function(l,y){e.exports=y(Qe)})(mt,function(l){function y(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var _=y(l),d="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),p="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),S="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),w="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),u=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function f(i,v,E){var a,t;return E==="m"?v?"минута":"минуту":i+" "+(a=+i,t={mm:v?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[E].split("_"),a%10==1&&a%100!=11?t[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?t[1]:t[2])}var b=function(i,v){return u.test(v)?d[i.month()]:p[i.month()]};b.s=p,b.f=d;var c=function(i,v){return u.test(v)?S[i.month()]:w[i.month()]};c.s=w,c.f=S;var o={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:b,monthsShort:c,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:f,mm:f,h:"час",hh:f,d:"день",dd:f,M:"месяц",MM:f,y:"год",yy:f},ordinal:function(i){return i},meridiem:function(i){return i<4?"ночи":i<12?"утра":i<17?"дня":"вечера"}};return _.default.locale(o,null,!0),o})})(Gt);var ge=(e,n)=>W(e.kind,e,{...e.context,authAttempt:n});function Kt(e){return({client:n,forward:l})=>{var y=new Set,_=ce(),d=ce(),p=new Map;function S(){u=void 0;var b=p;p=new Map,b.forEach(_.next)}function w(b){u=void 0;var c=p;p=new Map,c.forEach(o=>{d.next(We(o,b))})}var u,f=null;return b=>{function c(){u=Promise.resolve().then(()=>e({mutate(a,t,s){var r=n.createRequestOperation("mutation",se(a,t),s);return Le(ve(1)(M(R=>R.operation.key===r.key&&r.context._instance===R.operation.context._instance)(be(()=>{var R=i(r);y.add(R.context._instance),_.next(R)})(E))))},appendHeaders(a,t){var s=typeof a.context.fetchOptions=="function"?a.context.fetchOptions():a.context.fetchOptions||{};return W(a.kind,a,{...a.context,fetchOptions:{...s,headers:{...s.headers,...t}}})}})).then(a=>{a&&(f=a),S()}).catch(a=>{w(a)})}c();function o(a){p.set(a.key,ge(a,!0)),f&&!u&&(u=f.refreshAuth().then(S).catch(w))}function i(a){return f?f.addAuthToOperation(a):a}var v=M(Boolean)(_e(a=>a.kind==="teardown"?(p.delete(a.key),a):a.context._instance&&y.has(a.context._instance)?a:a.context.authAttempt?i(a):u||!f?(u||c(),p.has(a.key)||p.set(a.key,ge(a,!1)),null):function(s){return!s.context.authAttempt&&f&&f.willAuthError&&f.willAuthError(s)}(a)?(o(a),null):i(ge(a,!1)))(F([_.source,b]))),E=l(v);return F([d.source,M(a=>!y.has(a.operation.context._instance)&&a.error&&function(s){return f&&f.didAuthError&&f.didAuthError(s.error,s.operation)}(a)&&!a.operation.context.authAttempt?(o(a.operation),!1):(y.has(a.operation.context._instance)&&y.delete(a.operation.context._instance),!0))(E)])}}}var Vt=e=>{var{retryIf:n,retryWith:l}=e,y=e.initialDelayMs||1e3,_=e.maxDelayMs||15e3,d=e.maxNumberAttempts||2,p=e.randomDelay!=null?!!e.randomDelay:!0;return({forward:S,dispatchDebug:w})=>u=>{var{source:f,next:b}=ce(),c=we(o=>{var i=o.context.retry||{count:0,delay:null};++i.count;var v=i.delay||y,E=Math.random()+1.5;p&&v*E<_&&(v*=E);var a=M(t=>(t.kind==="query"||t.kind==="teardown")&&t.key===o.key)(u);return de(a)(pt(()=>v)(le(W(o.kind,o,{...o.context,retry:i}))))})(f);return M(o=>{var i=o.operation.context.retry;if(!(o.error&&(n?n(o.error,o.operation):l||o.error.networkError)))return i&&(i.count=0,i.delay=null),!0;if(!((i&&i.count||0)>=d-1)){var v=l?l(o.error,o.operation):o.operation;return v?(b(v),!1):!0}return!0})(S(F([u,c])))}};function q(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function C(e){return q(e)==="object"}function Jt(e){return Array.isArray(e)&&e.length>0&&e.every(n=>"message"in n)}function Ce(e,n){return e.length<124?e:n}const Xt="graphql-transport-ws";var I;(function(e){e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(I||(I={}));var P;(function(e){e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete"})(P||(P={}));function Xe(e){if(!C(e))throw new Error(`Message is expected to be an object, but got ${q(e)}`);if(!e.type)throw new Error("Message is missing the 'type' property");if(typeof e.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${q(e.type)}`);switch(e.type){case P.ConnectionInit:case P.ConnectionAck:case P.Ping:case P.Pong:{if(e.payload!=null&&!C(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${e.payload}"`);break}case P.Subscribe:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${q(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!C(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${q(e.payload)}`);if(typeof e.payload.query!="string")throw new Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${q(e.payload.query)}`);if(e.payload.variables!=null&&!C(e.payload.variables))throw new Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${q(e.payload.variables)}`);if(e.payload.operationName!=null&&q(e.payload.operationName)!=="string")throw new Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${q(e.payload.operationName)}`);if(e.payload.extensions!=null&&!C(e.payload.extensions))throw new Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${q(e.payload.extensions)}`);break}case P.Next:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${q(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!C(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${q(e.payload)}`);break}case P.Error:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${q(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Jt(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break}case P.Complete:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${q(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${e.type}"`)}return e}function Zt(e,n){return Xe(typeof e=="string"?JSON.parse(e,n):e)}function ne(e,n){return Xe(e),JSON.stringify(e,n)}var H=globalThis&&globalThis.__await||function(e){return this instanceof H?(this.v=e,this):new H(e)},er=globalThis&&globalThis.__asyncGenerator||function(e,n,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y=l.apply(e,n||[]),_,d=[];return _={},p("next"),p("throw"),p("return"),_[Symbol.asyncIterator]=function(){return this},_;function p(c){y[c]&&(_[c]=function(o){return new Promise(function(i,v){d.push([c,o,i,v])>1||S(c,o)})})}function S(c,o){try{w(y[c](o))}catch(i){b(d[0][3],i)}}function w(c){c.value instanceof H?Promise.resolve(c.value.v).then(u,f):b(d[0][2],c)}function u(c){S("next",c)}function f(c){S("throw",c)}function b(c,o){c(o),d.shift(),d.length&&S(d[0][0],d[0][1])}};function tr(e){const{url:n,connectionParams:l,lazy:y=!0,onNonLazyError:_=console.error,lazyCloseTimeout:d=0,keepAlive:p=0,disablePong:S,connectionAckWaitTimeout:w=0,retryAttempts:u=5,retryWait:f=async function($){let m=1e3;for(let g=0;g<$;g++)m*=2;await new Promise(g=>setTimeout(g,m+Math.floor(Math.random()*(3e3-300)+300)))},shouldRetry:b=ie,isFatalConnectionProblem:c,on:o,webSocketImpl:i,generateID:v=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,$=>{const m=Math.random()*16|0;return($=="x"?m:m&3|8).toString(16)})},jsonMessageReplacer:E,jsonMessageReviver:a}=e;let t;if(i){if(!nr(i))throw new Error("Invalid WebSocket implementation provided");t=i}else typeof WebSocket<"u"?t=WebSocket:typeof global<"u"?t=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(t=window.WebSocket||window.MozWebSocket);if(!t)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const s=t,r=(()=>{const h=(()=>{const m={};return{on(g,k){return m[g]=k,()=>{delete m[g]}},emit(g){var k;"id"in g&&((k=m[g.id])===null||k===void 0||k.call(m,g))}}})(),$={connecting:o!=null&&o.connecting?[o.connecting]:[],opened:o!=null&&o.opened?[o.opened]:[],connected:o!=null&&o.connected?[o.connected]:[],ping:o!=null&&o.ping?[o.ping]:[],pong:o!=null&&o.pong?[o.pong]:[],message:o!=null&&o.message?[h.emit,o.message]:[h.emit],closed:o!=null&&o.closed?[o.closed]:[],error:o!=null&&o.error?[o.error]:[]};return{onMessage:h.on,on(m,g){const k=$[m];return k.push(g),()=>{k.splice(k.indexOf(g),1)}},emit(m,...g){for(const k of[...$[m]])k(...g)}}})();function R(h){const $=[r.on("error",m=>{$.forEach(g=>g()),h(m)}),r.on("closed",m=>{$.forEach(g=>g()),h(m)})]}let U,Y=0,ke,he=!1,oe=0,$e=!1;async function Se(){clearTimeout(ke);const[h,$]=await(U??(U=new Promise((k,O)=>(async()=>{if(he){if(await f(oe),!Y)return U=void 0,O({code:1e3,reason:"All Subscriptions Gone"});oe++}r.emit("connecting");const x=new s(typeof n=="function"?await n():n,Xt);let j,Q;function ae(){isFinite(p)&&p>0&&(clearTimeout(Q),Q=setTimeout(()=>{x.readyState===s.OPEN&&(x.send(ne({type:P.Ping})),r.emit("ping",!1,void 0))},p))}R(T=>{U=void 0,clearTimeout(j),clearTimeout(Q),O(T),ie(T)&&T.code===4499&&(x.close(4499,"Terminated"),x.onerror=null,x.onclose=null)}),x.onerror=T=>r.emit("error",T),x.onclose=T=>r.emit("closed",T),x.onopen=async()=>{try{r.emit("opened",x);const T=typeof l=="function"?await l():l;if(x.readyState!==s.OPEN)return;x.send(ne(T?{type:P.ConnectionInit,payload:T}:{type:P.ConnectionInit},E)),isFinite(w)&&w>0&&(j=setTimeout(()=>{x.close(I.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},w)),ae()}catch(T){r.emit("error",T),x.close(I.InternalClientError,Ce(T instanceof Error?T.message:new Error(T).message,"Internal client error"))}};let L=!1;x.onmessage=({data:T})=>{try{const A=Zt(T,a);if(r.emit("message",A),A.type==="ping"||A.type==="pong"){r.emit(A.type,!0,A.payload),A.type==="pong"?ae():S||(x.send(ne(A.payload?{type:P.Pong,payload:A.payload}:{type:P.Pong})),r.emit("pong",!1,A.payload));return}if(L)return;if(A.type!==P.ConnectionAck)throw new Error(`First message cannot be of type ${A.type}`);clearTimeout(j),L=!0,r.emit("connected",x,A.payload),he=!1,oe=0,k([x,new Promise((cr,Ze)=>R(Ze))])}catch(A){x.onmessage=null,r.emit("error",A),x.close(I.BadResponse,Ce(A instanceof Error?A.message:new Error(A).message,"Bad response"))}}})())));h.readyState===s.CLOSING&&await $;let m=()=>{};const g=new Promise(k=>m=k);return[h,m,Promise.race([g.then(()=>{if(!Y){const k=()=>h.close(1e3,"Normal Closure");isFinite(d)&&d>0?ke=setTimeout(()=>{h.readyState===s.OPEN&&k()},d):k()}}),$])]}function Pe(h){if(ie(h)&&(rr(h.code)||[I.InternalServerError,I.InternalClientError,I.BadRequest,I.BadResponse,I.Unauthorized,I.SubprotocolNotAcceptable,I.SubscriberAlreadyExists,I.TooManyInitialisationRequests].includes(h.code)))throw h;if($e)return!1;if(ie(h)&&h.code===1e3)return Y>0;if(!u||oe>=u||!b(h)||c!=null&&c(h))throw h;return he=!0}return y||(async()=>{for(Y++;;)try{const[,,h]=await Se();await h}catch(h){try{if(!Pe(h))return}catch($){return _==null?void 0:_($)}}})(),{on:r.on,subscribe(h,$){const m=v(h);let g=!1,k=!1,O=()=>{Y--,g=!0};return(async()=>{for(Y++;;)try{const[x,j,Q]=await Se();if(g)return j();const ae=r.onMessage(m,L=>{switch(L.type){case P.Next:{$.next(L.payload);return}case P.Error:{k=!0,g=!0,$.error(L.payload),O();return}case P.Complete:{g=!0,O();return}}});x.send(ne({id:m,type:P.Subscribe,payload:h},E)),O=()=>{!g&&x.readyState===s.OPEN&&x.send(ne({id:m,type:P.Complete},E)),Y--,g=!0,j()},await Q.finally(ae);return}catch(x){if(!Pe(x))return}})().then(()=>{k||$.complete()}).catch(x=>{$.error(x)}),()=>{g||O()}},iterate(h){const $=[],m={done:!1,error:null,resolve:()=>{}},g=this.subscribe(h,{next(O){$.push(O),m.resolve()},error(O){m.done=!0,m.error=O,m.resolve()},complete(){m.done=!0,m.resolve()}}),k=function(){return er(this,arguments,function*(){for(;;){for($.length||(yield H(new Promise(j=>m.resolve=j)));$.length;)yield yield H($.shift());if(m.error)throw m.error;if(m.done)return yield H(void 0)}})}();return k.throw=async O=>(m.done||(m.done=!0,m.error=O,m.resolve()),{done:!0,value:void 0}),k.return=async()=>(g(),{done:!0,value:void 0}),k},async dispose(){if($e=!0,U){const[h]=await U;h.close(1e3,"Normal Closure")}},terminate(){U&&r.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}function ie(e){return C(e)&&"code"in e&&"reason"in e}function rr(e){return[1e3,1001,1006,1005,1012,1013,1013].includes(e)?!1:e>=1e3&&e<=1999}function nr(e){return typeof e=="function"&&"constructor"in e&&"CLOSED"in e&&"CLOSING"in e&&"CONNECTING"in e&&"OPEN"in e}const or=window.HASURA_GRAPHQL_ENDPOINT!==void 0?window.HASURA_GRAPHQL_ENDPOINT:"https://app.synmetrix.org/v1/graphql",ar=window.HASURA_WS_ENDPOINT!==void 0?window.HASURA_WS_ENDPOINT:"wss://app.synmetrix.org/v1/graphql",ir=e=>e.includes("ws://")||e.includes("wss://")?e:`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${e}`,sr=()=>{const{accessToken:e,refreshToken:n,JWTpayload:l,setAuthData:y,cleanTokens:_}=_t();return yt.useMemo(()=>{const p=tr({url:ir(ar),connectionParams:()=>({headers:{Authorization:`Bearer ${e}`,"content-type":"application/json"}})}),S=[Kt(async w=>({addAuthToOperation:u=>{var o;if(!e)return u;const b={...{...l}},c=(o=u==null?void 0:u.context)==null?void 0:o.role;return c?b["x-hasura-role"]=c:b["x-hasura-role"]="user",b["x-hasura-role"]!=="anonymous"&&(b.Authorization=`Bearer ${e}`),w.appendHeaders(u,b)},willAuthError:()=>((l==null?void 0:l.exp)||0)*1e3<=new Date().getTime(),didAuthError:u=>{var f;return(f=u==null?void 0:u.graphQLErrors)==null?void 0:f.some(b=>{var c;return((c=b.extensions)==null?void 0:c.code)==="FORBIDDEN"})},refreshAuth:async()=>{if(n){const u=await gt(n);if(u.error){_(),ht.push(bt);return}y({accessToken:u.jwt_token,refreshToken:u.refresh_token})}}})),Vt({initialDelayMs:500,maxDelayMs:1500,randomDelay:!0,maxNumberAttempts:1/0}),kt,wt({forwardSubscription:w=>({subscribe:u=>({unsubscribe:p.subscribe(w,u)})})})];return Rt({url:or,exchanges:S})},[l,e,_,n,y])},lr={token:{fontFamily:"Manrope",colorPrimary:"#470D69",motion:!1},components:{Layout:{headerBg:"transparent",bodyBg:"transparent"}}},ur={ru:It,en:zt},xr=({children:e})=>{const{i18n:{language:n}}=xt();return Qe.locale(n),Re.jsx(et,{theme:lr,locale:ur[n],children:Re.jsx(ft,{value:sr(),children:e})})};export{xr as default};
