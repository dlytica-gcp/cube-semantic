import{R as v,C}from"./index-2a334e56.js";import{D as A}from"./index-17f232aa.js";import{S as N}from"./index-f28b3217.js";import{m as S}from"./index-4e5c896b.js";import{j as e}from"./index-31f541c4.js";import{u as b,r as x}from"./react-venders-3a9fd7ec.js";import{u as F}from"./index-d72c3122.js";import{u as M,R as k}from"./index-74b97788.js";import{N as E}from"./index-fadf905d.js";import{C as R}from"./CurrentUserStore-886fe293.js";import{u as T}from"./useCheckResponse-471c00b7.js";import{u as D}from"./useLocation-795e9ebc.js";import{S as I}from"./index-654ccca1.js";import{f as a}from"./formatTime-900939d2.js";import{A as O}from"./index-74275833.js";import{a as P}from"./index-166ce56c.js";import{C as L}from"./index-81782579.js";import{R as U}from"./paths-1d44e380.js";import{u as $}from"./useTranslation-f1e31b7f.js";import{S as z}from"./SettingOutlined-58db4ea1.js";import"./button-255d95e9.js";import"./Sider-2eea88ce.js";import"./dayjs.min-e1e47a26.js";import"./tslib.es6-5f87f175.js";import"./index-d4c68e4d.js";import"./validations-55614028.js";import"./alertTypes-bd9943c7.js";import"./capitalize-b2c18dd5.js";import"./urql.es-e4ed66a8.js";import"./index-801816c4.js";const B="_wrapper_2l4w9_1",q="_body_2l4w9_4",G="_action_2l4w9_7",H="_actionIcon_2l4w9_11",J="_modal_2l4w9_15",K="_creator_2l4w9_18",Q="_avatar_2l4w9_22",V="_email_2l4w9_26",d={wrapper:B,body:q,action:G,actionIcon:H,modal:J,creator:K,avatar:Q,email:V},Se=({alerts:n,exploration:p})=>{var j;const{t:s}=$(["reports","pages"]),h=F(),[,i]=D(),m=U,{teamData:c}=R(),{reportId:l}=((j=b)==null?void 0:j())||{},o=x.useMemo(()=>n!=null&&n.length?n:(c==null?void 0:c.reports)||[],[n,c]),r=x.useMemo(()=>o.find(t=>t.id===l),[l,o]),{mutations:{deleteMutationData:f,execDeleteMutation:_}}=M({}),u=t=>{i(`${m}/${t.id}`)},w=t=>{_({id:t.id})},g=()=>{i(m)};T(f,()=>{},{successMessage:s("report_deleted")}),x.useEffect(()=>{o!=null&&o.length&&l&&!r&&(S.error(s("not_found")),i(m))},[l,o==null?void 0:o.length,m,r,i,s]);const y=t=>e.jsx(L,{title:t.name,titleTooltip:t.name,onTitleClick:()=>u(t),extra:e.jsx(A,{className:d.btn,trigger:["click"],menu:{items:[{key:"edit",label:s("common:words.edit"),onClick:()=>u(t)},{key:"delete",label:e.jsx(P,{title:s("common:words.delete_report"),onConfirm:()=>w(t),children:s("common:words.delete")})}]},children:e.jsx(z,{},"setting")}),children:e.jsxs("dl",{children:[t.creator&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("common:words.creator")}),e.jsx("dd",{title:t.creator.email,children:e.jsxs("div",{className:d.creator,children:[e.jsx(O,{className:d.avatar,width:h.md?36:27,height:h.md?36:27,username:t.creator.displayName,img:t.creator.avatarUrl}),e.jsx("div",{className:d.email,children:t.creator.email})]})})]}),t.type&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("common:words.type")}),e.jsx("dd",{title:a(t.type),children:a(t.type)})]}),t.schedule&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("common:words.schedule")}),e.jsx("dd",{title:a(t.schedule),children:a(t.schedule)})]}),t.createdAt&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("common:words.created_at")}),e.jsx("dd",{title:a(t.createdAt),children:a(t.createdAt)})]}),t.updatedAt&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("common:words.updated_at")}),e.jsx("dd",{title:a(t.updatedAt),children:a(t.updatedAt)})]}),t.status&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("common:words.status")}),e.jsx("dd",{children:e.jsx(I,{status:t.status,children:t.lastActivity})})]})]})},t.id);return e.jsxs(e.Fragment,{children:[e.jsx(N,{className:d.wrapper,direction:"vertical",size:13,children:e.jsx("div",{className:d.body,children:o!=null&&o.length?e.jsx(v,{justify:"start",gutter:[32,32],children:o.map(t=>e.jsx(C,{xs:24,sm:12,xl:8,children:y(t)},t.id))}):e.jsx(E,{type:"reports"})})}),e.jsx(k,{report:r,exploration:(r==null?void 0:r.exploration)||p,isOpen:!!r,onClose:g})]})};export{Se as default};
